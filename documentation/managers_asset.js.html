<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>managers/asset.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><details><summary>bento</summary><a href="module-bento.html">bento</a><ul class='methods'><li data-type='method'><a href="module-bento.html#getCanvas">getCanvas</a></li><li data-type='method'><a href="module-bento.html#getGameData">getGameData</a></li><li data-type='method'><a href="module-bento.html#getGameSpeed">getGameSpeed</a></li><li data-type='method'><a href="module-bento.html#getRenderer">getRenderer</a></li><li data-type='method'><a href="module-bento.html#getSettings">getSettings</a></li><li data-type='method'><a href="module-bento.html#getViewport">getViewport</a></li><li data-type='method'><a href="module-bento.html#reload">reload</a></li><li data-type='method'><a href="module-bento.html#setGameSpeed">setGameSpeed</a></li><li data-type='method'><a href="module-bento.html#setup">setup</a></li></ul></details></li><li><details><summary>bento/autoresize</summary><a href="module-bento_autoresize.html">bento/autoresize</a></details></li><li><details><summary>bento/canvas</summary><a href="module-bento_canvas.html">bento/canvas</a><ul class='methods'><li data-type='method'><a href="module-bento_canvas.html#getCanvas">getCanvas</a></li><li data-type='method'><a href="module-bento_canvas.html#getContext">getContext</a></li></ul></details></li><li><details><summary>bento/components/animation</summary><a href="module-bento_components_animation.html">bento/components/animation</a><ul class='methods'><li data-type='method'><a href="module-bento_components_animation.html#getAnimationName">getAnimationName</a></li><li data-type='method'><a href="module-bento_components_animation.html#getCurrentFrame">getCurrentFrame</a></li><li data-type='method'><a href="module-bento_components_animation.html#getCurrentSpeed">getCurrentSpeed</a></li><li data-type='method'><a href="module-bento_components_animation.html#getFrameWidth">getFrameWidth</a></li><li data-type='method'><a href="module-bento_components_animation.html#setAnimation">setAnimation</a></li><li data-type='method'><a href="module-bento_components_animation.html#setCurrentSpeed">setCurrentSpeed</a></li><li data-type='method'><a href="module-bento_components_animation.html#setFrame">setFrame</a></li><li data-type='method'><a href="module-bento_components_animation.html#setup">setup</a></li></ul></details></li><li><details><summary>bento/components/clickable</summary><a href="module-bento_components_clickable.html">bento/components/clickable</a></details></li><li><details><summary>bento/components/fill</summary><a href="module-bento_components_fill.html">bento/components/fill</a></details></li><li><details><summary>bento/components/opacity</summary><a href="module-bento_components_opacity.html">bento/components/opacity</a><ul class='methods'><li data-type='method'><a href="module-bento_components_opacity.html#getOpacity">getOpacity</a></li><li data-type='method'><a href="module-bento_components_opacity.html#setOpacity">setOpacity</a></li></ul></details></li><li><details><summary>bento/components/rotation</summary><a href="module-bento_components_rotation.html">bento/components/rotation</a><ul class='methods'><li data-type='method'><a href="module-bento_components_rotation.html#addAngleDegree">addAngleDegree</a></li><li data-type='method'><a href="module-bento_components_rotation.html#addAngleRadian">addAngleRadian</a></li><li data-type='method'><a href="module-bento_components_rotation.html#getAngleDegree">getAngleDegree</a></li><li data-type='method'><a href="module-bento_components_rotation.html#getAngleRadian">getAngleRadian</a></li><li data-type='method'><a href="module-bento_components_rotation.html#setAngleDegree">setAngleDegree</a></li><li data-type='method'><a href="module-bento_components_rotation.html#setAngleRadian">setAngleRadian</a></li></ul></details></li><li><details><summary>bento/components/scale</summary><a href="module-bento_components_scale.html">bento/components/scale</a><ul class='methods'><li data-type='method'><a href="module-bento_components_scale.html#setScaleX">setScaleX</a></li><li data-type='method'><a href="module-bento_components_scale.html#setScaleY">setScaleY</a></li></ul></details></li><li><details><summary>bento/components/sprite</summary><a href="module-bento_components_sprite.html">bento/components/sprite</a><ul class='methods'><li data-type='method'><a href="module-bento_components_sprite.html#insertBefore">insertBefore</a></li></ul></details></li><li><details><summary>bento/components/translation</summary><a href="module-bento_components_translation.html">bento/components/translation</a></details></li><li><details><summary>bento/entity</summary><a href="module-bento_entity.html">bento/entity</a><ul class='methods'><li data-type='method'><a href="module-bento_entity.html#attach">attach</a></li><li data-type='method'><a href="module-bento_entity.html#collidesWith">collidesWith</a></li><li data-type='method'><a href="module-bento_entity.html#extend">extend</a></li><li data-type='method'><a href="module-bento_entity.html#getBoundingBox">getBoundingBox</a></li><li data-type='method'><a href="module-bento_entity.html#getComponent">getComponent</a></li><li data-type='method'><a href="module-bento_entity.html#getLocalPosition">getLocalPosition</a></li><li data-type='method'><a href="module-bento_entity.html#getWorldPosition">getWorldPosition</a></li><li data-type='method'><a href="module-bento_entity.html#moveComponentTo">moveComponentTo</a></li><li data-type='method'><a href="module-bento_entity.html#remove">remove</a></li><li data-type='method'><a href="module-bento_entity.html#setOriginRelative">setOriginRelative</a></li></ul></details></li><li><details><summary>bento/eventsystem</summary><a href="module-bento_eventsystem.html">bento/eventsystem</a><ul class='methods'><li data-type='method'><a href="module-bento_eventsystem.html#fire">fire</a></li><li data-type='method'><a href="module-bento_eventsystem.html#off">off</a></li><li data-type='method'><a href="module-bento_eventsystem.html#on">on</a></li></ul></details></li><li><details><summary>bento/gui/clickbutton</summary><a href="module-bento_gui_clickbutton.html">bento/gui/clickbutton</a></details></li><li><details><summary>bento/gui/counter</summary><a href="module-bento_gui_counter.html">bento/gui/counter</a></details></li><li><details><summary>bento/gui/text</summary><a href="module-bento_gui_text.html">bento/gui/text</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_text.html#getStrings">getStrings</a></li><li data-type='method'><a href="module-bento_gui_text.html#getText">getText</a></li><li data-type='method'><a href="module-bento_gui_text.html#setText">setText</a></li></ul></details></li><li><details><summary>bento/gui/togglebutton</summary><a href="module-bento_gui_togglebutton.html">bento/gui/togglebutton</a></details></li><li><details><summary>bento/managers/asset</summary><a href="module-bento_managers_asset.html">bento/managers/asset</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_asset.html#getAssetGroups">getAssetGroups</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getAssets">getAssets</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getAudio">getAudio</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getImage">getImage</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getImageElement">getImageElement</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getJson">getJson</a></li><li data-type='method'><a href="module-bento_managers_asset.html#load">load</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadAssetGroups">loadAssetGroups</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadAudioFromUrl">loadAudioFromUrl</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadImageFromUrl">loadImageFromUrl</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadJsonFromUrl">loadJsonFromUrl</a></li><li data-type='method'><a href="module-bento_managers_asset.html#reload">reload</a></li><li data-type='method'><a href="module-bento_managers_asset.html#unload">unload</a></li></ul></details></li><li><details><summary>bento/managers/audio</summary><a href="module-bento_managers_audio.html">bento/managers/audio</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_audio.html#getVolume">getVolume</a></li><li data-type='method'><a href="module-bento_managers_audio.html#isPlayingMusic">isPlayingMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#muteMusic">muteMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#muteSound">muteSound</a></li><li data-type='method'><a href="module-bento_managers_audio.html#playMusic">playMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#playSound">playSound</a></li><li data-type='method'><a href="module-bento_managers_audio.html#preventSounds">preventSounds</a></li><li data-type='method'><a href="module-bento_managers_audio.html#setVolume">setVolume</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopAllMusic">stopAllMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopAllSound">stopAllSound</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopMusic">stopMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopSound">stopSound</a></li></ul></details></li><li><details><summary>bento/managers/input</summary><a href="module-bento_managers_input.html">bento/managers/input</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_input.html#getPointers">getPointers</a></li><li data-type='method'><a href="module-bento_managers_input.html#getRemoteAxes">getRemoteAxes</a></li><li data-type='method'><a href="module-bento_managers_input.html#isAnyGamepadButtonDown">isAnyGamepadButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isAnyKeyDown">isAnyKeyDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isGamepadButtonDown">isGamepadButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isGamepadButtonDown">isGamepadButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isKeyDown">isKeyDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isRemoteButtonDown">isRemoteButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#onResize">onResize</a></li><li data-type='method'><a href="module-bento_managers_input.html#resetPointers">resetPointers</a></li><li data-type='method'><a href="module-bento_managers_input.html#resume">resume</a></li><li data-type='method'><a href="module-bento_managers_input.html#setRemoteExitOnMenuPress">setRemoteExitOnMenuPress</a></li><li data-type='method'><a href="module-bento_managers_input.html#stop">stop</a></li></ul></details></li><li><details><summary>bento/managers/object</summary><a href="module-bento_managers_object.html">bento/managers/object</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_object.html#attach">attach</a></li><li data-type='method'><a href="module-bento_managers_object.html#count">count</a></li><li data-type='method'><a href="module-bento_managers_object.html#draw">draw</a></li><li data-type='method'><a href="module-bento_managers_object.html#get">get</a></li><li data-type='method'><a href="module-bento_managers_object.html#getByFamily">getByFamily</a></li><li data-type='method'><a href="module-bento_managers_object.html#getByName">getByName</a></li><li data-type='method'><a href="module-bento_managers_object.html#getHshg">getHshg</a></li><li data-type='method'><a href="module-bento_managers_object.html#isPaused">isPaused</a></li><li data-type='method'><a href="module-bento_managers_object.html#pause">pause</a></li><li data-type='method'><a href="module-bento_managers_object.html#remove">remove</a></li><li data-type='method'><a href="module-bento_managers_object.html#removeAll">removeAll</a></li><li data-type='method'><a href="module-bento_managers_object.html#resume">resume</a></li><li data-type='method'><a href="module-bento_managers_object.html#run">run</a></li><li data-type='method'><a href="module-bento_managers_object.html#setSortMode">setSortMode</a></li><li data-type='method'><a href="module-bento_managers_object.html#stop">stop</a></li><li data-type='method'><a href="module-bento_managers_object.html#update">update</a></li></ul></details></li><li><details><summary>bento/managers/savestate</summary><a href="module-bento_managers_savestate.html">bento/managers/savestate</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_savestate.html#add">add</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#clear">clear</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#getStorage">getStorage</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#load">load</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#remove">remove</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#save">save</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#setId">setId</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#setStorage">setStorage</a></li></ul></details></li><li><details><summary>bento/managers/screen</summary><a href="module-bento_managers_screen.html">bento/managers/screen</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_screen.html#add">add</a></li><li data-type='method'><a href="module-bento_managers_screen.html#getCurrentScreen">getCurrentScreen</a></li><li data-type='method'><a href="module-bento_managers_screen.html#hide">hide</a></li><li data-type='method'><a href="module-bento_managers_screen.html#reset">reset</a></li><li data-type='method'><a href="module-bento_managers_screen.html#show">show</a></li></ul></details></li><li><details><summary>bento/math/array2d</summary><a href="module-bento_math_array2d.html">bento/math/array2d</a><ul class='methods'><li data-type='method'><a href="module-bento_math_array2d.html#get">get</a></li><li data-type='method'><a href="module-bento_math_array2d.html#isArray2d">isArray2d</a></li><li data-type='method'><a href="module-bento_math_array2d.html#iterate">iterate</a></li><li data-type='method'><a href="module-bento_math_array2d.html#set">set</a></li></ul></details></li><li><details><summary>bento/math/matrix</summary><a href="module-bento_math_matrix.html">bento/math/matrix</a><ul class='methods'><li data-type='method'><a href="module-bento_math_matrix.html#add">add</a></li><li data-type='method'><a href="module-bento_math_matrix.html#addTo">addTo</a></li><li data-type='method'><a href="module-bento_math_matrix.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_matrix.html#get">get</a></li><li data-type='method'><a href="module-bento_math_matrix.html#getHeight">getHeight</a></li><li data-type='method'><a href="module-bento_math_matrix.html#getWidth">getWidth</a></li><li data-type='method'><a href="module-bento_math_matrix.html#isMatrix">isMatrix</a></li><li data-type='method'><a href="module-bento_math_matrix.html#iterate">iterate</a></li><li data-type='method'><a href="module-bento_math_matrix.html#multiply">multiply</a></li><li data-type='method'><a href="module-bento_math_matrix.html#multiplyWith">multiplyWith</a></li><li data-type='method'><a href="module-bento_math_matrix.html#set">set</a></li><li data-type='method'><a href="module-bento_math_matrix.html#setValues">setValues</a></li><li data-type='method'><a href="module-bento_math_matrix.html#stringify">stringify</a></li><li data-type='method'><a href="module-bento_math_matrix.html#transpose">transpose</a></li></ul></details></li><li><details><summary>bento/math/polygon</summary><a href="module-bento_math_polygon.html">bento/math/polygon</a><ul class='methods'><li data-type='method'><a href="module-bento_math_polygon.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_polygon.html#getBoundingBox">getBoundingBox</a></li><li data-type='method'><a href="module-bento_math_polygon.html#hasPosition">hasPosition</a></li><li data-type='method'><a href="module-bento_math_polygon.html#intersect">intersect</a></li><li data-type='method'><a href="module-bento_math_polygon.html#isPolygon">isPolygon</a></li><li data-type='method'><a href="module-bento_math_polygon.html#offset">offset</a></li></ul></details></li><li><details><summary>bento/math/rectangle</summary><a href="module-bento_math_rectangle.html">bento/math/rectangle</a><ul class='methods'><li data-type='method'><a href="module-bento_math_rectangle.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getCenter">getCenter</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getCorner">getCorner</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getX2">getX2</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getY2">getY2</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#grow">grow</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#hasPosition">hasPosition</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#intersect">intersect</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#intersection">intersection</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#isRectangle">isRectangle</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#offset">offset</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#union">union</a></li></ul></details></li><li><details><summary>bento/math/transformmatrix</summary><a href="module-bento_math_transformmatrix.html">bento/math/transformmatrix</a></details></li><li><details><summary>bento/math/vector2</summary><a href="module-bento_math_vector2.html">bento/math/vector2</a><ul class='methods'><li data-type='method'><a href="module-bento_math_vector2.html#add">add</a></li><li data-type='method'><a href="module-bento_math_vector2.html#addTo">addTo</a></li><li data-type='method'><a href="module-bento_math_vector2.html#angle">angle</a></li><li data-type='method'><a href="module-bento_math_vector2.html#angleBetween">angleBetween</a></li><li data-type='method'><a href="module-bento_math_vector2.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_vector2.html#distance">distance</a></li><li data-type='method'><a href="module-bento_math_vector2.html#divide">divide</a></li><li data-type='method'><a href="module-bento_math_vector2.html#divideBy">divideBy</a></li><li data-type='method'><a href="module-bento_math_vector2.html#dotProduct">dotProduct</a></li><li data-type='method'><a href="module-bento_math_vector2.html#isCloserThan">isCloserThan</a></li><li data-type='method'><a href="module-bento_math_vector2.html#isFartherThan">isFartherThan</a></li><li data-type='method'><a href="module-bento_math_vector2.html#magnitude">magnitude</a></li><li data-type='method'><a href="module-bento_math_vector2.html#multiply">multiply</a></li><li data-type='method'><a href="module-bento_math_vector2.html#multiplyWith">multiplyWith</a></li><li data-type='method'><a href="module-bento_math_vector2.html#normalize">normalize</a></li><li data-type='method'><a href="module-bento_math_vector2.html#reflect">reflect</a></li><li data-type='method'><a href="module-bento_math_vector2.html#rotateDegree">rotateDegree</a></li><li data-type='method'><a href="module-bento_math_vector2.html#rotateRadian">rotateRadian</a></li><li data-type='method'><a href="module-bento_math_vector2.html#scalarMultiply">scalarMultiply</a></li><li data-type='method'><a href="module-bento_math_vector2.html#scalarMultiplyWith">scalarMultiplyWith</a></li><li data-type='method'><a href="module-bento_math_vector2.html#scale">scale</a></li><li data-type='method'><a href="module-bento_math_vector2.html#subtract">subtract</a></li><li data-type='method'><a href="module-bento_math_vector2.html#subtractFrom">subtractFrom</a></li><li data-type='method'><a href="module-bento_math_vector2.html#toMatrix">toMatrix</a></li></ul></details></li><li><details><summary>bento/objectpool</summary><a href="module-bento_objectpool.html">bento/objectpool</a><ul class='methods'><li data-type='method'><a href="module-bento_objectpool.html#~discard">discard</a></li><li data-type='method'><a href="module-bento_objectpool.html#~get">get</a></li></ul></details></li><li><details><summary>bento/packedimage</summary><a href="module-bento_packedimage.html">bento/packedimage</a></details></li><li><details><summary>bento/screen</summary><a href="module-bento_screen.html">bento/screen</a><ul class='methods'><li data-type='method'><a href="module-bento_screen.html#loadTiled">loadTiled</a></li><li data-type='method'><a href="module-bento_screen.html#onHide">onHide</a></li><li data-type='method'><a href="module-bento_screen.html#onShow">onShow</a></li></ul></details></li><li><details><summary>bento/tiled</summary><a href="module-bento_tiled.html">bento/tiled</a><ul class='methods'><li data-type='method'><a href="module-bento_tiled.html#moveTo">moveTo</a></li><li data-type='method'><a href="module-bento_tiled.html#remove">remove</a></li></ul></details></li><li><details><summary>bento/tween</summary><a href="module-bento_tween.html">bento/tween</a></details></li><li><details><summary>bento/utils</summary><a href="module-bento_utils.html">bento/utils</a><ul class='methods'><li data-type='method'><a href="module-bento_utils.html#approach">approach</a></li><li data-type='method'><a href="module-bento_utils.html#checksum">checksum</a></li><li data-type='method'><a href="module-bento_utils.html#cloneJson">cloneJson</a></li><li data-type='method'><a href="module-bento_utils.html#extend">extend</a></li><li data-type='method'><a href="module-bento_utils.html#forEach">forEach</a></li><li data-type='method'><a href="module-bento_utils.html#getKeyLength">getKeyLength</a></li><li data-type='method'><a href="module-bento_utils.html#getRandom">getRandom</a></li><li data-type='method'><a href="module-bento_utils.html#getRandomFloat">getRandomFloat</a></li><li data-type='method'><a href="module-bento_utils.html#getRandomRange">getRandomRange</a></li><li data-type='method'><a href="module-bento_utils.html#getRandomRangeFloat">getRandomRangeFloat</a></li><li data-type='method'><a href="module-bento_utils.html#isAndroid">isAndroid</a></li><li data-type='method'><a href="module-bento_utils.html#isApple">isApple</a></li><li data-type='method'><a href="module-bento_utils.html#isArray">isArray</a></li><li data-type='method'><a href="module-bento_utils.html#isBetween">isBetween</a></li><li data-type='method'><a href="module-bento_utils.html#isBoolean">isBoolean</a></li><li data-type='method'><a href="module-bento_utils.html#isCocoonJs">isCocoonJs</a></li><li data-type='method'><a href="module-bento_utils.html#isDefined">isDefined</a></li><li data-type='method'><a href="module-bento_utils.html#isFunction">isFunction</a></li><li data-type='method'><a href="module-bento_utils.html#isInt">isInt</a></li><li data-type='method'><a href="module-bento_utils.html#isNumber">isNumber</a></li><li data-type='method'><a href="module-bento_utils.html#isObject">isObject</a></li><li data-type='method'><a href="module-bento_utils.html#isString">isString</a></li><li data-type='method'><a href="module-bento_utils.html#isUndefined">isUndefined</a></li><li data-type='method'><a href="module-bento_utils.html#pickRandom">pickRandom</a></li><li data-type='method'><a href="module-bento_utils.html#removeObject">removeObject</a></li><li data-type='method'><a href="module-bento_utils.html#repeat">repeat</a></li><li data-type='method'><a href="module-bento_utils.html#sign">sign</a></li><li data-type='method'><a href="module-bento_utils.html#toDegree">toDegree</a></li><li data-type='method'><a href="module-bento_utils.html#toRadian">toRadian</a></li></ul></details></li></ul><h3>Global</h3><ul><li><a href="global.html#bento">bento</a></li><li><a href="global.html">define</a></li><li><a href="global.html">refresh</a></li><li><a href="global.html">require</a></li><li><a href="global.html">watch</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">managers/asset.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Manager that loads and controls assets. Can be accessed through Bento.assets namespace.
 * Assets MUST be loaded through assetGroups (for now). An assetgroup is a json file that indicates which
 * assets to load, and where to find them.
 * &lt;br>Exports: Constructor, can be accessed through Bento.asset namespace
 * @module bento/managers/asset
 * @returns AssetManager
 */
bento.define('bento/managers/asset', [
    'bento/packedimage',
    'bento/utils',
    'audia'
], function (PackedImage, Utils, Audia) {
    'use strict';
    return function () {
        var assetGroups = {},
            path = '',
            assets = {
                audio: {},
                json: {},
                images: {},
                binary: {}
            },
            texturePacker = {},
            packs = [],
            loadAudio = function (name, source, callback) {
                var i,
                    failed = true,
                    loadAudioFile = function (index, src) {
                        var audio = new Audia(),
                            canPlay = audio.canPlayType('audio/' + source[index].slice(-3));
                        if (!!canPlay || window.ejecta) {
                            // success!
                            audio.onload = function () {
                                callback(null, name, audio);
                            };
                            audio.src = src;
                            failed = false;
                            return true;
                        }
                        return false;
                    };
                if (!Utils.isArray(source)) {
                    // source = [path + 'audio/' + source];
                    source = [source];
                }
                // try every type
                for (i = 0; i &lt; source.length; ++i) {
                    if (loadAudioFile(i, path + 'audio/' + source[i])) {
                        break;
                    }
                }
                if (failed) {
                    callback('This audio type is not supported:', name, source);
                }
            },
            loadJSON = function (name, source, callback) {
                var xhr = new XMLHttpRequest();
                if (xhr.overrideMimeType) {
                    xhr.overrideMimeType('application/json');
                }
                xhr.open('GET', source, true);
                xhr.onerror = function () {
                    callback('Error ' + source);
                };
                xhr.ontimeout = function () {
                    callback('Timeout' + source);
                };
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        if ((xhr.status === 304) || (xhr.status === 200) || ((xhr.status === 0) &amp;&amp; xhr.responseText)) {
                            callback(null, name, JSON.parse(xhr.responseText));
                        } else {
                            callback('Error: State ' + xhr.readyState + ' ' + source);
                        }
                    }
                };
                xhr.send(null);
            },
            loadBinary = function (name, source, success, failure) {
                var xhr = new XMLHttpRequest(),
                    arrayBuffer,
                    byteArray,
                    buffer,
                    i = 0;

                xhr.open('GET', source, true);
                xhr.onerror = function () {
                    callback('Error ' + name);
                };
                xhr.responseType = 'arraybuffer';
                xhr.onload = function (e) {
                    var binary;
                    arrayBuffer = xhr.response;
                    if (arrayBuffer) {
                        byteArray = new Uint8Array(arrayBuffer);
                        buffer = [];
                        for (i; i &lt; byteArray.byteLength; ++i) {
                            buffer[i] = String.fromCharCode(byteArray[i]);
                        }
                        // loadedAssets.binary[name] = buffer.join('');
                        binary = buffer.join('');
                        callback(null, name, binary);
                    }
                };
                xhr.send();
            },
            loadImage = function (name, source, callback) {
                var img = new Image();
                img.src = source;
                img.addEventListener('load', function () {
                    callback(null, name, img);
                }, false);
                img.addEventListener('error', function (evt) {
                    // TODO: Implement failure: should it retry to load the image?
                    console.log('ERROR: loading image failed');
                }, false);
            },
            /**
             * Loads asset groups (json files containing names and asset paths to load)
             * If the assetGroup parameter is passed to Bento.setup, this function will be
             * called automatically by Bento.
             * This will not load the assets (merely the assetgroups). To load the assets,
             * you must call Bento.assets.load()
             * @function
             * @instance
             * @param {Object} jsonFiles - Name with json path
             * @param {Function} onReady - Callback when ready
             * @param {Function} onLoaded - Callback when json file is loaded
             * @name loadAssetGroups
             */
            loadAssetGroups = function (jsonFiles, onReady, onLoaded) {
                var jsonName,
                    keyCount = Utils.getKeyLength(jsonFiles),
                    loaded = 0,
                    callback = function (err, name, json) {
                        if (err) {
                            console.log(err);
                            return;
                        }
                        assetGroups[name] = json;
                        loaded += 1;
                        if (Utils.isDefined(onLoaded)) {
                            onLoaded(loaded, keyCount);
                        }
                        if (keyCount === loaded &amp;&amp; Utils.isDefined(onReady)) {
                            onReady(null);
                        }
                    };
                for (jsonName in jsonFiles) {
                    if (jsonFiles.hasOwnProperty(jsonName)) {
                        loadJSON(jsonName, jsonFiles[jsonName], callback);
                    }
                }
            },
            /**
             * Loads assets from asset group.
             * @function
             * @instance
             * @param {String} groupName - Name of asset group
             * @param {Function} onReady - Callback when ready
             * @param {Function} onLoaded - Callback when asset file is loaded
             * @name load
             */
            load = function (groupName, onReady, onLoaded) {
                var group = assetGroups[groupName],
                    asset,
                    assetsLoaded = 0,
                    assetCount = 0,
                    toLoad = [],
                    checkLoaded = function () {
                        if (assetsLoaded === assetCount &amp;&amp; Utils.isDefined(onReady)) {
                            initPackedImages();
                            onReady(null);
                        }
                    },
                    onLoadImage = function (err, name, image) {
                        if (err) {
                            console.log(err);
                            return;
                        }
                        assets.images[name] = image;
                        assetsLoaded += 1;
                        if (Utils.isDefined(onLoaded)) {
                            onLoaded(assetsLoaded, assetCount);
                        }
                        checkLoaded();
                    },
                    onLoadPack = function (err, name, json) {
                        if (err) {
                            console.log(err);
                            return;
                        }
                        assets.json[name] = json;
                        packs.push(name);
                        assetsLoaded += 1;
                        if (Utils.isDefined(onLoaded)) {
                            onLoaded(assetsLoaded, assetCount);
                        }
                        checkLoaded();
                    },
                    onLoadJson = function (err, name, json) {
                        if (err) {
                            console.log(err);
                            return;
                        }
                        assets.json[name] = json;
                        assetsLoaded += 1;
                        if (Utils.isDefined(onLoaded)) {
                            onLoaded(assetsLoaded, assetCount);
                        }
                        checkLoaded();
                    },
                    onLoadAudio = function (err, name, audio) {
                        if (err) {
                            console.log(err);
                        } else {
                            assets.audio[name] = audio;
                        }
                        assetsLoaded += 1;
                        if (Utils.isDefined(onLoaded)) {
                            onLoaded(assetsLoaded, assetCount);
                        }
                        checkLoaded();
                    },
                    readyForLoading = function (fn, asset, path, callback) {
                        toLoad.push({
                            fn: fn,
                            asset: asset,
                            path: path,
                            callback: callback
                        });
                    },
                    loadAllAssets = function () {
                        var i = 0,
                            data;
                        for (i = 0; i &lt; toLoad.length; ++i) {
                            data = toLoad[i];
                            data.fn(data.asset, data.path, data.callback);
                        }
                    };

                if (!Utils.isDefined(group)) {
                    onReady('Could not find asset group ' + groupName);
                    return;
                }
                // set path
                if (Utils.isDefined(group.path)) {
                    path = group.path;
                }
                // count the number of assets first
                // get images
                if (Utils.isDefined(group.images)) {
                    assetCount += Utils.getKeyLength(group.images);
                    for (asset in group.images) {
                        if (!group.images.hasOwnProperty(asset)) {
                            continue;
                        }
                        readyForLoading(loadImage, asset, path + 'images/' + group.images[asset], onLoadImage);
                    }
                }
                // get packed images
                if (Utils.isDefined(group.texturePacker)) {
                    assetCount += Utils.getKeyLength(group.texturePacker);
                    for (asset in group.texturePacker) {
                        if (!group.texturePacker.hasOwnProperty(asset)) {
                            continue;
                        }
                        readyForLoading(loadJSON, asset, path + 'json/' + group.texturePacker[asset], onLoadPack);
                    }
                }
                // get audio
                if (Utils.isDefined(group.audio)) {
                    assetCount += Utils.getKeyLength(group.audio);
                    for (asset in group.audio) {
                        if (!group.audio.hasOwnProperty(asset)) {
                            continue;
                        }
                        readyForLoading(loadAudio, asset, group.audio[asset], onLoadAudio);
                    }
                }
                // get json
                if (Utils.isDefined(group.json)) {
                    assetCount += Utils.getKeyLength(group.json);
                    for (asset in group.json) {
                        if (!group.json.hasOwnProperty(asset)) {
                            continue;
                        }
                        readyForLoading(loadJSON, asset, path + 'json/' + group.json[asset], onLoadJson);
                    }
                }
                // load all assets
                loadAllAssets();
            },
            /**
             * Loads image from URL. The resulting asset can be accessed through Bento.assets.getImage().
             * @function
             * @instance
             * @param {String} name - Name of asset
             * @param {String} url - Url path (relative to your index.html)
             * @param {Function} callback - Callback function
             * @name loadImageFromUrl
             */
            loadImageFromUrl = function (name, url, callback) {
                var onLoadImage = function (err, name, image) {
                    if (err) {
                        console.log(err);
                        if (callback) {
                            callback(err);
                        }
                        return;
                    }
                    assets.images[name] = image;
                    if (callback) {
                        callback(null, image);
                    }
                };
                loadImage(name, url, onLoadImage);
            },
            /**
             * Loads JSON from URL. The resulting asset can be accessed through Bento.assets.getJson().
             * @function
             * @instance
             * @param {String} name - Name of asset
             * @param {String} url - Url path (relative to your index.html)
             * @param {Function} callback - Callback function
             * @name loadJsonFromUrl
             */
            loadJsonFromUrl = function (name, url, callback) {
                var onLoadJson = function (err, name, json) {
                    if (err) {
                        console.log(err);
                        if (callback) {
                            callback(err);
                        }
                        return;
                    }
                    assets.json[name] = json;
                    if (callback) {
                        callback(null, json);
                    }
                };
                loadJSON(name, url, onLoadJson);
            },
            /**
             * Loads audio from URL. The resulting asset can be accessed through Bento.assets.getAudio().
             * @function
             * @instance
             * @param {String} name - Name of asset
             * @param {String} url - Url path (relative to your index.html)
             * @param {Function} callback - Callback function
             * @name loadAudioFromUrl
             */
            loadAudioFromUrl = function (name, url, callback) {
                var onLoadAudio = function (err, name, audio) {
                    if (err) {
                        console.log(err);
                        if (callback) {
                            callback(err);
                        }
                        return;
                    }
                    assets.audio[name] = audio;
                    if (callback) {
                        callback(audio);
                    }
                };
                loadAudio(name, url, onLoadAudio);
            },
            /**
             * Unloads assets (not implemented yet)
             * @function
             * @instance
             * @param {String} groupName - Name of asset group
             * @name unload
             */
            unload = function (groupName) {},
            /**
             * Returns a previously loaded image
             * @function
             * @instance
             * @param {String} name - Name of image
             * @returns {PackedImage} Image
             * @name getImage
             */
            getImage = function (name) {
                var image, packedImage = texturePacker[name];
                if (!packedImage) {
                    image = getImageElement(name);
                    if (!image) {
                        throw 'Can not find ' + name;
                    }
                    packedImage = PackedImage(image);
                    texturePacker[name] = packedImage;
                }
                return packedImage;
            },
            /**
             * Returns a previously loaded image element
             * @function
             * @instance
             * @param {String} name - Name of image
             * @returns {HTMLImage} Html Image element
             * @name getImageElement
             */
            getImageElement = function (name) {
                var asset = assets.images[name];
                if (!Utils.isDefined(asset)) {
                    throw ('Asset ' + name + ' could not be found');
                }
                return asset;
            },
            /**
             * Returns a previously loaded json object
             * @function
             * @instance
             * @param {String} name - Name of image
             * @returns {Object} Json object
             * @name getJson
             */
            getJson = function (name) {
                var asset = assets.json[name];
                if (!Utils.isDefined(asset)) {
                    throw ('Asset ' + name + ' could not be found');
                }
                return asset;
            },
            /**
             * Returns a previously loaded audio element (currently by howler)
             * @function
             * @instance
             * @param {String} name - Name of image
             * @returns {Audia} Audia object
             * @name getAudio
             */
            getAudio = function (name) {
                var asset = assets.audio[name];
                if (!Utils.isDefined(asset)) {
                    throw ('Asset ' + name + ' could not be found');
                }
                return asset;
            },
            /**
             * Returns all assets
             * @function
             * @instance
             * @param {String} name - Name of image
             * @returns {Object} assets - Object with reference to all loaded assets
             * @name getAssets
             */
            getAssets = function () {
                return assets;
            },
            initPackedImages = function () {
                var frame, pack, i, image, json, name;
                while (packs.length) {
                    pack = packs.pop();
                    image = getImageElement(pack);
                    json = getJson(pack);

                    // parse json
                    for (i = 0; i &lt; json.frames.length; ++i) {
                        name = json.frames[i].filename;
                        name = name.substring(0, name.length - 4);
                        frame = json.frames[i].frame;
                        texturePacker[name] = PackedImage(image, frame);
                    }
                }
            },
            /**
             * Returns asset group
             * @function
             * @instance
             * @returns {Object} assetGroups - reference to loaded JSON file
             * @name getAssetGroups
             */
            getAssetGroups = function () {
                return assetGroups;
            },
             /**
             * Reloads all assets
             * @function
             * @instance
             * @param {Function} callback - called when all assets are loaded
             * @name reload
             */
            reload  = function (callback) {
                var group,
                    count = 0,
                    loaded = 0,
                    end = function () {
                        loaded += 1;
                        if (loaded === count &amp;&amp; callback) {
                            callback();
                        }
                    };
                for (group in assetGroups) {
                    if (!assetGroups.hasOwnProperty(group)) {
                        continue;
                    }
                    load(group, end, function (current, total) {});
                    count += 1;
                }
            };
        return {
            reload: reload,
            loadAssetGroups: loadAssetGroups,
            load: load,
            loadImageFromUrl: loadImageFromUrl,
            loadJsonFromUrl: loadJsonFromUrl,
            loadAudioFromUrl: loadAudioFromUrl,
            unload: unload,
            getImage: getImage,
            getImageElement: getImageElement,
            getJson: getJson,
            getAudio: getAudio,
            getAssets: getAssets,
            getAssetGroups: getAssetGroups
        };
    };
});</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue May 17 2016 14:44:59 GMT+0200 (CEST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/opennav.js"></script>
</body>
</html>
