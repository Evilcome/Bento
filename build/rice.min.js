var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){(n||!hasProp(e,r))&&(i&&"string"!=typeof t?(e[r]||(e[r]={}),mixin(e[r],t,n,i)):e[r]=t)}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}function newContext(e){function t(e){var t,n;for(t=0;e[t];t+=1)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var r,o,a,s,u,c,f,d,h,l,p,g=n&&n.split("/"),m=g,v=q.map,x=v&&v["*"];if(e&&"."===e.charAt(0)&&(n?(m=getOwn(q.pkgs,n)?g=[n]:g.slice(0,g.length-1),e=m.concat(e.split("/")),t(e),o=getOwn(q.pkgs,r=e[0]),e=e.join("/"),o&&e===r+"/"+o.main&&(e=r)):0===e.indexOf("./")&&(e=e.substring(2))),i&&v&&(g||x)){for(s=e.split("/"),u=s.length;u>0;u-=1){if(f=s.slice(0,u).join("/"),g)for(c=g.length;c>0;c-=1)if(a=getOwn(v,g.slice(0,c).join("/")),a&&(a=getOwn(a,f))){d=a,h=u;break}if(d)break;!l&&x&&getOwn(x,f)&&(l=getOwn(x,f),p=u)}!d&&l&&(d=l,h=p),d&&(s.splice(0,h,d),e=s.join("/"))}return e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName?(t.parentNode.removeChild(t),!0):void 0})}function r(e){var t=getOwn(q.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),w.require.undef(e),w.require([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,i,r){var a,s,u,c,f=null,d=t?t.name:null,h=e,l=!0,p="";return e||(l=!1,e="_@r"+(P+=1)),c=o(e),f=c[0],e=c[1],f&&(f=n(f,d,r),s=getOwn(A,f)),e&&(f?p=s&&s.normalize?s.normalize(e,function(e){return n(e,d,r)}):n(e,d,r):(p=n(e,d,r),c=o(p),f=c[0],p=c[1],i=!0,a=w.nameToUrl(p))),u=!f||s||i?"":"_unnormalized"+(T+=1),{prefix:f,name:p,parentMap:t,unnormalized:!!u,url:a,originalName:h,isDefine:l,id:(f?f+"!"+p:p)+u}}function s(e){var t=e.id,n=getOwn(S,t);return n||(n=S[t]=new w.Module(e)),n}function u(e,t,n){var i=e.id,r=getOwn(S,i);!hasProp(A,i)||r&&!r.defineEmitComplete?(r=s(e),r.error&&"error"===t?n(r.error):r.on(t,n)):"defined"===t&&n(A[i])}function c(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(S,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function f(){globalDefQueue.length&&(apsp.apply(D,[D.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function d(e){delete S[e],delete M[e]}function h(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,r){var o=i.id,a=getOwn(S,o);!a||e.depMatched[r]||n[o]||(getOwn(t,o)?(e.defineDep(r,A[o]),e.check()):h(a,t,n))}),n[i]=!0)}function l(){var e,t,n,o,a=1e3*q.waitSeconds,s=a&&w.startTime+a<(new Date).getTime(),u=[],f=[],d=!1,p=!0;if(!x){if(x=!0,eachProp(M,function(n){if(e=n.map,t=e.id,n.enabled&&(e.isDefine||f.push(n),!n.error))if(!n.inited&&s)r(t)?(o=!0,d=!0):(u.push(t),i(t));else if(!n.inited&&n.fetched&&e.isDefine&&(d=!0,!e.prefix))return p=!1}),s&&u.length)return n=makeError("timeout","Load timeout for modules: "+u,null,u),n.contextName=w.contextName,c(n);p&&each(f,function(e){h(e,{},{})}),s&&!o||!d||!isBrowser&&!isWebWorker||E||(E=setTimeout(function(){E=0,l()},50)),x=!1}}function p(e){hasProp(A,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function g(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return g(t,w.onScriptLoad,"load","onreadystatechange"),g(t,w.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(f();D.length;){if(e=D.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));p(e)}}var x,y,w,b,E,q={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},S={},M={},k={},D=[],A={},O={},P=1,T=1;return b={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=A[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,n=getOwn(q.pkgs,e.map.id);return t=n?getOwn(q.config,e.map.id+"/"+n.main):getOwn(q.config,e.map.id),t||{}},exports:A[e.map.id]}}},y=function(e){this.events=getOwn(k,e.id)||{},this.map=e,this.shim=getOwn(q.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;return this.shim?void w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;O[e]||(O[e]=!0,w.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,r=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=w.execCb(n,o,i,r)}catch(a){e=a}else r=w.execCb(n,o,i,r);if(this.map.isDefine&&(t=this.module,t&&void 0!==t.exports&&t.exports!==this.exports?r=t.exports:void 0===r&&this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else r=o;this.exports=r,this.map.isDefine&&!this.ignore&&(A[n]=r,req.onResourceLoad&&req.onResourceLoad(w,this.map,this.depMaps)),d(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=a(e.prefix);this.depMaps.push(i),u(i,"defined",bind(this,function(i){var r,o,f,h=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null,p=w.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(h=i.normalize(h,function(e){return n(e,l,!0)})||""),o=a(e.prefix+"!"+h,this.map.parentMap),u(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),f=getOwn(S,o.id),void(f&&(this.depMaps.push(o),this.events.error&&f.on("error",bind(this,function(e){this.emit("error",e)})),f.enable()))):(r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(S,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&d(e.map.id)}),c(e)}),r.fromText=bind(this,function(n,i){var o=e.name,u=a(o),f=useInteractive;i&&(n=i),f&&(useInteractive=!1),s(u),hasProp(q.config,t)&&(q.config[o]=q.config[t]);try{req.exec(n)}catch(d){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+d,d,[t]))}f&&(useInteractive=!0),this.depMaps.push(u),w.completeLoad(o),p([o],r)}),void i.load(e.name,p,r,q))})),w.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){M[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,r;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(b,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&u(e,"error",bind(this,this.errback))}n=e.id,i=S[n],hasProp(b,n)||!i||i.enabled||w.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(S,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},w={config:q,contextName:e,registry:S,defined:A,urlFetched:O,defQueue:D,Module:y,makeModuleMap:a,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=q.pkgs,n=q.shim,i={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?"map"===t?(q.map||(q.map={}),mixin(q[t],e,!0,!0)):mixin(q[t],e,!0):q[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),n[t]=e}),q.shim=n),e.packages&&(each(e.packages,function(e){var n;e="string"==typeof e?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),q.pkgs=t),eachProp(S,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,r){function o(n,i,u){var f,d,h;return r.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?c(makeError("requireargs","Invalid require call"),u):t&&hasProp(b,n)?b[n](S[t.id]):req.get?req.get(w,n,t,o):(d=a(n,t,!1,!0),f=d.id,hasProp(A,f)?A[f]:c(makeError("notloaded",'Module name "'+f+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),w.nextTick(function(){v(),h=s(a(null,t)),h.skipMap=r.skipMap,h.init(n,i,u,{enabled:!0}),l()}),o)}return r=r||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var i,r=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==r&&(!a||r>1)&&(i=e.substring(r,e.length),e=e.substring(0,r)),w.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(A,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(A,e)||hasProp(S,e)}}),t||(o.undef=function(e){f();var n=a(e,t,!0),r=getOwn(S,e);i(e),delete A[e],delete O[n.url],delete k[e],r&&(r.events.defined&&(k[e]=r.events),d(e))}),o},enable:function(e){var t=getOwn(S,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,i,o=getOwn(q.shim,e)||{},a=o.exports;for(f();D.length;){if(n=D.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);p(n)}if(i=getOwn(S,e),!t&&!hasProp(A,e)&&i&&!i.inited){if(!(!q.enforceDefine||a&&getGlobal(a)))return r(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));p([e,o.deps||[],o.exportsFn])}l()},nameToUrl:function(e,t,n){var i,r,o,a,s,u,c,f,d;if(req.jsExtRegExp.test(e))f=e+(t||"");else{for(i=q.paths,r=q.pkgs,s=e.split("/"),u=s.length;u>0;u-=1){if(c=s.slice(0,u).join("/"),o=getOwn(r,c),d=getOwn(i,c)){isArray(d)&&(d=d[0]),s.splice(0,u,d);break}if(o){a=e===o.name?o.location+"/"+o.main:o.location,s.splice(0,u,a);break}}f=s.join("/"),f+=t||(/^data\:|\?/.test(f)||n?"":".js"),f=("/"===f.charAt(0)||f.match(/^[\w\+\.\-]+:/)?"":q.baseUrl)+f}return q.urlArgs?f+((-1===f.indexOf("?")?"?":"&")+q.urlArgs):f},load:function(e,t){req.load(w,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);w.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);return r(t.id)?void 0:c(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},w.require=w.makeRequire(),w}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.9",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(a=o.context),r=getOwn(contexts,a),r||(r=contexts[a]=req.s.newContext(a)),o&&r.configure(o),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")])),(r?r.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),function(){"use strict";var e={require:window.require,define:window.define};window.rice=window.rice||e}(),rice.define("rice/base",["rice/sugar","rice/math/vector2","rice/math/rectangle"],function(e,t,n){"use strict";var i=0;return function(r){var o,a,s=!0,u=t(0,0),c=t(0,0),f=n(0,0,0,0),d=[],h=[],l=[],p=null,g=++i,m=function(){for(var t;l.length;)t=l.pop(),e.removeObject(d,t)},v={z:0,timer:0,global:!1,updateWhenPaused:!1,name:"",update:function(e){var t,n,i;for(t=0,n=d.length;n>t;++t)i=d[t],i&&i.update&&i.update(e);++v.timer,m()},draw:function(e){var t,n,i;if(s){for(t=0,n=d.length;n>t;++t)i=d[t],i&&i.draw&&i.draw(e);for(t=d.length-1;t>=0;t--)i=d[t],i&&i.postDraw&&i.postDraw(e)}},addToFamily:function(e){h.push(e)},getFamily:function(){return h},add:function(t){return e.combine(v,t)},getPosition:function(){return u},setPosition:function(e){u.x=e.x,u.y=e.y},getDimension:function(){return f},setDimension:function(t){e.isDimension(t)&&(f=t)},getBoundingBox:function(){var e,i,r,o,s,d;return a?(d=a.clone(),e=v.scale?v.scale.getScale():t(1,1),d.x*=Math.abs(e.x),d.y*=Math.abs(e.y),d.width*=Math.abs(e.x),d.height*=Math.abs(e.y),d.x+=u.x,d.y+=u.y,d):(e=v.scale?v.scale.getScale():t(1,1),i=u.x-c.x*e.x,o=u.y-c.y*e.y,r=u.x+(f.width-c.x)*e.x,s=u.y+(f.height-c.y)*e.y,e.x<0&&(r=[i,i=r][0]),e.y<0&&(s=[o,o=s][0]),n(i,o,r-i,s-o))},setBoundingBox:function(e){a=e},getRectangle:function(){return a},setOrigin:function(e){c.x=e.x,c.y=e.y},setOriginRelative:function(e){c.x=e.x*f.width,c.y=e.y*f.height},getOrigin:function(){return c},isVisible:function(){return s},setVisible:function(e){s=e},attach:function(t,n){var i={};return d.push(t),t.setParent&&t.setParent(v),t.init&&t.init(),n&&(i[n]=t,e.combine(v,i)),v},remove:function(e){var t;if(e)return t=d.indexOf(e),t>=0&&(d[t]=null),v},getComponents:function(){return d},getComponentByName:function(e){var t,n,i;for(t=0,t=d.length;n>t;++t)if(i=d[t],i.name===e)return i},setParent:function(e){p=e},getParent:function(){return p},getId:function(){return g},collidesWith:function(n,i){return e.isDefined(i)||(i=t(0,0)),v.getBoundingBox().offset(i).intersect(n.getBoundingBox())},collidesWithGroup:function(n,i){var r,o,a;if(e.isDefined(i)||(i=t(0,0)),!e.isArray(n))return void console.log("Collision check must be with an Array of object");if(!n.length)return null;for(a=v.getBoundingBox().offset(i),r=0;r<n.length;++r)if(o=n[r],o!==v&&o.getBoundingBox&&a.intersect(o.getBoundingBox()))return o;return null}};if(r){if(r.components)for(e.isArray(r.components)||(r.components=[r.components]),o=0;o<r.components.length;++o)r.components[o](v,r);if(r.position&&v.setPosition(r.position),r.origin&&v.setOrigin(r.origin),r.originRelative&&v.setOriginRelative(r.originRelative),r.name&&v.setName(r.name),r.family)for(e.isArray(r.family)||(r.family=[r.family]),o=0;o<r.family.length;++o)v.addToFamily(r.family[o]);r.init&&r.init.apply(v),v.updateWhenPaused=r.updateWhenPaused||!1,v.global=r.global||!1}return v}}),rice.define("glue/director",["rice/sugar","rice/game","rice/screen"],function(){"use strict";var e={},t=null,n={addScreen:function(t){if(!t.getName())throw"Add name property to screen";e[t.getName()]=t},showScreen:function(n){if(null!==t&&this.hideScreen(),t=e[n],!t)throw"Could not find screen";t.onShow()},hideScreen:function(){t&&(t.onHide(),t=null)},getActiveScreen:function(){return t}};return n}),rice.define("rice/entity",["rice/sugar","rice/math/vector2","rice/base","rice/component/rotation","rice/component/scale"],function(){"use strict";return function(){var e;return e}}),rice.define("rice/game",["rice/sugar","rice/lib/domready","rice/lib/requestanimationframe","rice/managers/asset","rice/managers/input","rice/managers/object","rice/math/vector2","rice/math/rectangle"],function(e,t,n,i,r,o,a,s){"use strict";var u,c,f,d=((new Date).getTime(),!0),h=0,l={x:1,y:1},p={debugBar:null,fps:0,fpsAccumulator:0,fpsTicks:0,fpsMaxAverage:600,avg:0,lastTime:0},g={},m=s(0,0,640,480),v=function(){p.debugBar=document.createElement("div"),p.debugBar.style["font-family"]="Arial",p.debugBar.style.padding="8px",p.debugBar.style.position="absolute",p.debugBar.style.right="0px",p.debugBar.style.top="0px",p.debugBar.innerHTML="fps: 0",document.body.appendChild(p.debugBar)},x=function(e,t){if(u=document.getElementById(e),!u)throw"No canvas found";c=u.getContext("2d"),t||(c.imageSmoothingEnabled&&(c.imageSmoothingEnabled=!1),c.webkitImageSmoothingEnabled&&(c.webkitImageSmoothingEnabled=!1),c.mozImageSmoothingEnabled&&(c.mozImageSmoothingEnabled=!1)),u.width=m.width,u.height=m.height,h=m.height/m.width,g={canvas:u,context:c,canvasScale:l,viewport:m}},y=function(){var e,t,n=window.innerWidth,i=window.innerHeight;f=i/n,h>f?(e=i/h,t=i):(e=n,t=n*h),d?(u.style.width=e+"px",u.style.height=t+"px"):(u.width=e,u.height=t),l.x=e/m.width,l.y=t/m.height},w={init:function(e,n){t(function(){var t=function(){o.run(),n&&n()};if(e.debug&&v(),e.canvasDimension){if(!e.canvasDimension.isRectangle)throw"settings.canvasDimension must be a rectangle";m=e.canvasDimension||m}(!e.renderer||e.renderer="2d")&&x(e.canvasId,e.smoothing),window.addEventListener("resize",y,!1),window.addEventListener("orientationchange",y,!1),y(),r.init({canvas:u,canvasScale:l,viewport:m}),o.init(g,p),e.assetGroups?i.loadAssetGroups(e.assetGroups,t):t()})},getViewport:function(){return m},Assets:i,Objects:o};return e.combine(w,o),w}),rice.define("rice/screen",["rice","rice/game","rice/math/rectangle"],function(e,t,n){"use strict";return function(e){var i=t.getViewport(),r=n(0,0,0,0),o=!1,a={setDimension:function(e){r.width=e.width,r.height=e.height},getDimension:function(){return r},add:function(e){return Sugar.combine(this,e)},getName:function(){return e},setShown:function(e){if(!Sugar.isBoolean(e))throw"Argument is not a boolean";o=e},onShow:function(){},onHide:function(){t.removeAll(),i.x=0,i.y=0}};return a}}),rice.define("rice/subimage",["rice/math/rectangle"],function(e){return function(t,n){var i=e(n.x,n.y,n.w,n.h);return i.image=t,i}}),rice.define("rice/sugar",[],function(){"use strict";var e=function(e){return"string"==typeof e||e instanceof String},t=Array.prototype.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(e){return"[object Object]"===Object.prototype.toString.call(e)},i=function(e){return"[object Function]"===Object.prototype.toString.call(e)},r=function(e){return"[object Number]"===Object.prototype.toString.call(e)},o=function(e){return e===!0||e===!1||"[object Boolean]"===Object.prototype.toString.call(e)},a=function(e){return parseFloat(e)===parseInt(e,10)&&!isNaN(e)},s=function(e){return void 0===e},u=function(e){return void 0!==e},c=function(e,t){var n,i;for(n=0,i=e.length;i>n;n+=1)if(e[n]===t){e.splice(n,1);break}},f=function(e,t){var i;for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?(e.super=e.super||{},f(e.super,{prop:e[i]})):e[i]=n(t[i])?f({},t[i]):t[i]);return e},d=function(e){return Object.keys(e).length},h=function(){var e=function(e,n){return t(e.slice(),n)},t=function(e,t){"function"!=typeof t&&(t=function(e,t){return String(e).localeCompare(t)});var i=e.length;if(1>=i)return e;for(var r=new Array(i),o=1;i>o;o*=2){n(e,t,o,r);var a=e;e=r,r=a}return e},n=function(e,t,n,i){var r,o,a,s,u,c=e.length,f=0,d=2*n;for(r=0;c>r;r+=d)for(o=r+n,a=o+n,o>c&&(o=c),a>c&&(a=c),s=r,u=o;;)if(o>s&&a>u)i[f++]=t(e[s],e[u])<=0?e[s++]:e[u++];else if(o>s)i[f++]=e[s++];else{if(!(a>u))break;i[f++]=e[u++]}};return e.inplace=function(e,i){var r=t(e,i);return r!==e&&n(r,null,e.length,e),e},e}();return{isString:e,isArray:t,isObject:n,isFunction:i,isNumber:r,isBoolean:o,isInt:a,isUndefined:s,isDefined:u,removeObject:c,combine:f,getKeyLength:d,stableSort:h}}),rice.define("rice/components/fill",["rice/sugar","rice/game"],function(e,t){"use strict";return function(n,i){var r=t.getViewport(),o={name:"fill",draw:function(e){e.context.fillStyle=i.color||"#000",e.context.fillRect(0,0,r.width,r.height)}};return n.attach(o),e.combine(n,{scale:o}),n}}),rice.define("rice/components/rotation",["rice/sugar"],function(e){"use strict";return function(t){var n,i={name:"rotation",draw:function(e){n&&e.context.rotate(n)},postDraw:function(){},addAngleDegree:function(e){n||(n=0),n+=e*Math.PI/180},addAngleRadian:function(e){n||(n=0),n+=e},setAngleDegree:function(e){n=e*Math.PI/180},setAngleRadian:function(e){n=e},getAngleDegree:function(){return n?180*n/Math.PI:0},getAngleRadian:function(){return n?n:0}};return t.attach(i),e.combine(t,{rotation:i}),t}}),rice.define("rice/components/scale",["rice/sugar","rice/math/vector2"],function(e,t){"use strict";return function(n){var i=!1,r=t(1,1),o={name:"scale",draw:function(e){i&&e.context.scale(r.x,r.y)},setScale:function(e){i=!0,r=e},getScale:function(){return r},setScaleX:function(e){i=!0,r.x=e},setScaleY:function(e){i=!0,r.y=e}};return n.attach(o),e.combine(n,{scale:o}),n}}),rice.define("rice/components/sprite",["rice/sugar"],function(e){"use strict";return function(t,n){var i,r,o,a={},s={frames:[0]},u=0,c=1,f=1,d=0,h=0,l=t.getOrigin(),p={name:"sprite",setup:function(e){r=e?e:{frameCountX:1,frameCountY:1},r.animations||(r.animations={}),r.animations["default"]||(r.animations["default"]={frames:[0]}),i=e.image,r.frameWidth&&r.frameHeight?(d=r.frameWidth,h=r.frameHeight,c=Math.floor(i.width/d),f=Math.floor(i.height/h)):(c=r.frameCountX||1,f=r.frameCountY||1,d=i.width/c,h=i.height/f),t.getDimension().width=d,t.getDimension().height=h,a=r.animations,s=a["default"]},setAnimation:function(t,n,i){var r=a[t];return r?void(r&&s!==r&&(e.isDefined(r.loop)||(r.loop=!0),e.isDefined(r.backTo)||(r.backTo=0),o=n,s=r,s.name=t,i||(u=0))):void console.log("Warning: animation "+t+" does not exist.")},getAnimation:function(){return s?s.name:null},setFrame:function(e){u=e},getCurrentFrame:function(){return u},getFrameWidth:function(){return d},update:function(){var e;if(s){if(e=!1,u+=s.speed||1,s.loop)for(;u>=s.frames.length;)u-=s.frames.length-s.backTo,e=!0;else u>=s.frames.length&&(e=!0);e&&o&&o()}},draw:function(e){var t=Math.min(Math.floor(u),s.frames.length-1),n=s.frames[t]%c*d,r=Math.floor(s.frames[t]/c)*h;e.context.translate(Math.round(-l.x),Math.round(-l.y)),e.context.drawImage(i,n,r,d,h,0,0,d,h)}};return n&&n[p.name]&&p.setup(n[p.name]),t.attach(p),t&&e.combine(t,{sprite:p}),t}}),rice.define("rice/components/translation",["rice/sugar","rice/math/vector2"],function(e){"use strict";return function(t){var n={name:"translation",draw:function(e){var n=t.getParent(),i=t.getPosition(),r=e.viewport;e.context.save(),e.context.translate(Math.round(i.x),Math.round(i.y)),null===n&&e.context.translate(Math.round(-r.x),Math.round(-r.y))},postDraw:function(e){e.context.restore()}};return t.attach(n),e.combine(t,{translation:n}),t}}),rice.define("rice/lib/domready",[],function(){"use strict";function e(e){var t;for(t=0;t<e.length;t+=1)e[t](c)}function t(){var t=f;u&&t.length&&(f=[],e(t))}function n(){u||(u=!0,a&&clearInterval(a),t())}function i(e){return u?e(c):f.push(e),i}var r,o,a,s="undefined"!=typeof window&&window.document,u=!s,c=s?document:null,f=[];if(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),o=document.createElement("div");try{r=null===window.frameElement}catch(d){}o.doScroll&&r&&window.external&&(a=setInterval(function(){try{o.doScroll(),n()}catch(e){}},30))}"complete"===document.readyState&&n()}return i.version="2.0.1",i.load=function(e,t,n,r){r.isBuild?n(null):i(n)},i}),rice.define("rice/lib/requestanimationframe",[],function(){"use strict";var e,t,n,i,r,o,a,s,u,c,f;for(t="native",n=Date.now||function(){return(new Date).getTime()},r=window.requestAnimationFrame,c=["webkit","moz","o","ms"],s=0,u=c.length;u>s;s++)a=c[s],null===r&&(r=window[a+"RequestAnimationFrame"]);return null===r&&(t="timer",e=0,i=o=null,r=function(t){var r,a,s;return null!==i?void i.push(t):(s=n(),a=Math.max(0,16.66-(s-e)),i=[t],e=s+a,r=function(){var t,n,r,o;for(n=i,i=null,r=0,o=n.length;o>r;r++)(t=n[r])(e)},void(o=setTimeout(r,a)))}),r(function(e){var t;null!==(null!==(t=window.performance)?t.now:void 0)&&1e12>e?(r.now=function(){return window.performance.now()},r.method="native-highres"):r.now=n}),r.now=null!==(null!==(f=window.performance)?f.now:void 0)?function(){return window.performance.now()}:n,r.method=t,window.requestAnimationFrame=r,r}),rice.define("rice/managers/asset",["rice/sugar"],function(e){"use strict";var t={},n={audio:{},json:{},images:{}},i=function(e,t,n){var i=new XMLHttpRequest;i.overrideMimeType&&i.overrideMimeType("application/json"),i.open("GET",t,!0),i.onerror=function(){n("Error "+t)},i.ontimeout=function(){n("Timeout"+t)},i.onreadystatechange=function(){4===i.readyState&&(200===i.status||0===i.status&&i.responseText?n(null,e,JSON.parse(i.responseText)):n("Error: State "+i.readyState+" "+t))},i.send(null)},r=function(e,t,n){var i=new Image;i.src=t,i.addEventListener("load",function(){n(null,e,i)},!1)},o=function(n,r,o){var a,s=e.getKeyLength(n),u=0,c=function(n,i,a){return n?void console.log(n):(t[i]=a,u+=1,e.isDefined(o)&&o(u,s),void(s===u&&e.isDefined(r)&&r(null)))};for(a in n)n.hasOwnProperty(a)&&i(a,n[a],c)},a=function(i,o,a){var s,u=t[i],c=0,f="",d=0,h=function(){c===d&&e.isDefined(o)&&o(null)},l=function(t,i,r){return t?void console.log(t):(n.images[i]=r,c+=1,e.isDefined(a)&&a(c,d),void h())};if(!e.isDefined(u))return void o("Could not find asset group "+i);if(e.isDefined(u.path)&&(f+=u.path),e.isDefined(u.images)){d+=e.getKeyLength(u.images);for(s in u.images)u.images.hasOwnProperty(s)&&r(s,f+u.images[s],l)}e.isDefined(u.audio)&&(d+=e.getKeyLength(u.audio)),e.isDefined(u.json)&&(d+=e.getKeyLength(u.json))},s=function(){},u=function(t){var i=n.images[t];if(!e.isDefined(i))throw"Asset "+t+" could not be found";return i},c=function(){};return{loadAssetGroups:o,load:a,unload:s,getImage:u,getSubImage:c}}),rice.define("rice/managers/input",["rice/sugar","rice/math/vector2"],function(e,t){"use strict";var n,i,r,o=0,a=0,s=function(){},u=function(){},c=function(){},f=function(e){var t;for(e.preventDefault(),t=0;t<e.changedTouches.length;t+=1)m(e,t);s(e)},d=function(e){var t;for(e.preventDefault(),t=0;t<e.changedTouches.length;t+=1)m(e,t);u(e)},h=function(e){var t;for(e.preventDefault(),t=0;t<e.changedTouches.length;t+=1)m(e,t);c(e)},l=function(e){e.preventDefault(),v(e),s(e)},p=function(e){e.preventDefault(),v(e),u(e)},g=function(e){e.preventDefault(),v(e),c(e)},m=function(e,n){var s=e.changedTouches[n],u=(s.pageX-o)/i.x,c=(s.pageY-a)/i.y;e.preventDefault(),e.changedTouches[n].position=t(u,c),e.changedTouches[n].worldPosition=e.changedTouches[n].position.clone(),e.changedTouches[n].worldPosition.x+=r.x,e.changedTouches[n].worldPosition.y+=r.y,e.position=e.changedTouches[n].position.clone(),e.worldPosition=e.changedTouches[n].position.clone()},v=function(e){var n=(e.clientX-o)/i.x,s=(e.clientY-a)/i.y;e.position=t(n,s),e.worldPosition=e.position.clone(),e.worldPosition.x+=r.x,e.worldPosition.y+=r.y};return{init:function(e){i=e.canvasScale,n=e.canvas,r=e.viewport,n.addEventListener("touchstart",f),n.addEventListener("touchmove",d),n.addEventListener("touchend",h),n.addEventListener("mousedown",l),n.addEventListener("mousemove",p),n.addEventListener("mouseup",g),n&&!navigator.isCocoonJS&&(o=n.offsetLeft,a=n.offsetTop),document.body.addEventListener("touchstart",function(e){return e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),!1
}),document.body.addEventListener("touchmove",function(e){return e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),!1})}}}),rice.define("rice/managers/object",["rice/sugar"],function(e){"use strict";var t,n,i=[],r=(new Date).getTime(),o=0,a=30,s=(new Date).getTime(),u=!1,c=!0,f=!1,d=function(){e.stableSort.inplace(i,function(e,t){return e.z-t.z})},h=function(){var e;for(e=i.length-1;e>=0;--e)null===i[e]&&i.splice(e,1)},l=function(){},p=function(e){var u,g,m=(new Date).getTime(),v=m-r;for(n&&n.debugBar&&(n.fps=Math.round(1e3/(window.performance.now()-n.lastTime),2),n.fpsAccumulator+=n.fps,n.fpsTicks+=1,n.avg=Math.round(n.fpsAccumulator/n.fpsTicks),n.fpsTicks>n.fpsMaxAverage&&(n.fpsAccumulator=0,n.fpsTicks=0),n.debugBar.innerHTML="fps: "+n.avg,n.lastTime=window.performance.now()),r=m,o+=v,t.deltaT=v;o>=1e3/60;){if(o-=1e3/60,o>1e3/a)for(;o>=1e3/60;)o-=1e3/60;for(g=0;g<i.length;++g)u=i[g],u&&u.update&&(f&&u.updateWhenPaused||!f)&&u.update(t)}for(h(),c&&d(),l(),g=0;g<i.length;++g)u=i[g],u&&u.draw&&u.draw(t);s=e,requestAnimationFrame(p)};return window.performance||(window.performance={now:Date.now}),{init:function(e,i){t=e,n=i},add:function(e){var t,n,r;if(e.z=e.z||0,i.push(e),e.init&&e.init(),e.getFamily)for(r=e.getFamily(),t=0;t<r.length;++t)n=r[t],quickAccess[n]||(quickAccess[n]=[]),quickAccess[n].push(e)},remove:function(t){var n,r,o,a;if(t&&(o=i.indexOf(t),o>=0&&(i[o]=null,t.destroy&&t.destroy()),t.getFamily))for(a=t.getFamily(),n=0;n<a.length;++n)r=a[n],e.removeObject(quickAccess[r],t)},removeAll:function(e){var t,n;for(t=0;t<i.length;++t)n=i[t],n&&(!n.global||e)&&this.remove(n)},getByName:function(e){var t,n,r=[];for(t=0;t<i.length;++t)n=i[t],n&&n.name&&n.name===e&&r.push(n);return r},getByFamily:function(e){var t=quickAccess[e];return t||(quickAccess[e]=[],t=quickAccess[e],console.log("Warning: family called "+e+" does not exist")),t},run:function(){u||(p(),u=!0)}}}),rice.define("puyojs/math/array2d",function(){"use strict";return function(e,t){var n,i,r=[];for(n=0;e>n;++n)for(r[n]=[],i=0;t>i;++i)r[n][i]=null;return{isArray2d:function(){return!0},iterate:function(n){var i,o;for(o=0;t>o;++o)for(i=0;e>i;++i)n(i,o,r[i][o])},get:function(e,t){return r[e][t]},set:function(e,t,n){r[e][t]=n},width:function(){return e},height:function(){return t}}}}),rice.define("rice/math/matrix",["rice/sugar"],function(e){"use strict";var t=function(e){var t=this.clone();return t.addTo(e),t},n=function(){var e=this.clone();return e.multiplyWith(other),e},i=function(r,o){var a,s,u=[],c=r||0,f=o||0,d=function(e,t,n){u[t*c+e]=n},h=function(e,t){return u[t*c+e]};for(s=0;f>s;++s)for(a=0;c>a;++a)a===s?d(a,s,1):d(a,s,0);return{isMatrix:function(){return!0},stringify:function(){var e,t,n="",i="";for(t=0;f>t;++t){for(e=0;c>e;++e)i+=h(e,t)+"	";n+=i+"\n",i=""}return n},get:function(e,t){return h(e,t)},set:function(e,t,n){d(e,t,n)},setValues:function(e){var t,n=Math.min(u.length,e.length);for(t=0;n>t;++t)u[t]=e[t];return this},getWidth:function(){return c},getHeight:function(){return f},iterate:function(t){var n,i;for(i=0;f>i;++i)for(n=0;c>n;++n){if(!e.isFunction(t))throw"Please supply a callback function";t(n,i,h(n,i))}},transpose:function(){var e,t,n=[];for(e=0;c>e;++e)for(t=0;f>t;++t)n[e*f+t]=h(e,t);return u=n,f=[c,c=f][0],this},addTo:function(e){var t,n;if(f!=e.getHeight()||c!=e.getWidth())throw"Matrix sizes incorrect";for(n=0;f>n;++n)for(t=0;c>t;++t)d(t,n,h(t,n)+e.get(t,n));return this},add:t,multiplyWith:function(e){var t,n,i,r=[],o=c,a=f,s=e.getHeight(),d=e.getWidth(),l=0;if(a!=d)throw"Matrix sizes incorrect";for(n=0;s>n;++n)for(t=0;o>t;++t){for(l=0,i=0;d>i;++i)l+=u.get(i,n)*h(t,i);r[n*o+t]=l}return u=r,c=o,f=s,this},multiply:n,clone:function(){var e=i(c,f);return e.setValues(u),e}}};return i}),rice.define("rice/math/polygon",["rice/sugar","rice/math/rectangle"],function(e,t){"use strict";var n=function(){return!0},i=function(){for(var e=[],t=this.points,n=t.length;n--;)e[n]=t[n];return u(e)},r=function(e){for(var t=[],n=this.points,i=n.length;i--;)t[i]=n[i],t[i].x+=e.x,t[i].y+=e.y;return u(t)},o=function(e,t,n,i){var r,o,a=function(e,t){return e.x*t.y-e.y*t.x},s=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},u=s(t,e),c=s(i,n),f=a(s(n,e),u),d=a(u,c);return 0===f&&0===d?n.x-e.x<0!=n.x-t.x<0!=i.x-e.x<0!=i.x-t.x<0||n.y-e.y<0!=n.y-t.y<0!=i.y-e.y<0!=i.y-t.y<0:0===d?!1:(r=f/d,o=a(s(n,e),c)/d,o>=0&&1>=o&&r>=0&&1>=r)},a=function(e){var t,n,i,r,a,s,c=[],f=this.points;if(e.isRectangle){if(!this.getBoundingBox().intersect(e))return!1;c.push({x:e.x,y:e.y}),c.push({x:e.getX2(),y:e.y}),c.push({x:e.getX2(),y:e.getY2()}),c.push({x:e.x,y:e.getY2()}),e=u(c)}else{if(!this.getBoundingBox().intersect(e.getBoundingBox()))return!1;c=e.points}for(a=0;a<f.length;++a)for(s=0;s<c.length;++s)if(t=f[a],n=f[(a+1)%f.length],i=c[s],r=c[(s+1)%c.length],o(t,n,i,r))return!0;return this.hasPosition(c[0])||e.hasPosition(f[0])?!0:!1},s=function(e){var t=this.points,n=!1,i=0,r=t.length-1;if(e.x<minX||e.x>maxX||e.y<minY||e.y>maxY)return!1;for(r;i<t.length;r=i++)t[i].y>e.y!=t[r].y>e.y&&e.x<(t[r].x-t[i].x)*(e.y-t[i].y)/(t[r].y-t[i].y)+t[i].x&&(n=!n);return n},u=function(e){var o,u=e[0].x,c=e[0].x,f=e[0].y,d=e[0].y,h=1;for(h=1;h<e.length;++h)o=e[h],u=Math.min(o.x,u),c=Math.max(o.x,c),f=Math.min(o.y,f),d=Math.max(o.y,d);return{points:e,isPolygon:n,getBoundingBox:function(){return t(u,f,c-u,d-f)},hasPosition:s,intersect:a,offset:r,clone:i}};return u}),rice.define("rice/math/rectangle",["rice/sugar"],function(){"use strict";var e=function(){return!0},t=function(){return this.x+this.width},n=function(){return this.y+this.height},i=function(e){var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.getX2(),e.getX2()),r=Math.max(this.getY2(),e.getY2());return f(t,n,i-t,r-n)},r=function(e){return e.isPolygon?e.intersect(this):!(this.x+this.width<=e.x||this.y+this.height<=e.y||this.x>=e.x+e.width||this.y>=e.y+e.height)},o=function(e){var t=f(0,0,0,0);return this.intersect(e)&&(t.x=Math.max(this.x,e.x),t.y=Math.max(this.y,e.y),t.width=Math.min(this.x+this.width,e.x+e.width)-t.x,t.height=Math.min(this.y+this.height,e.y+e.height)-t.y),t},a=function(e){return f(this.x+e.x,this.y+e.y,this.width,this.height)},s=function(){return f(this.x,this.y,this.width,this.height)},u=function(e){return!(e.x<this.x||e.y<this.y||e.x>=this.x+this.width||e.y>=this.y+this.height)},c=function(e){this.x-=e/2,this.y-=e/2,this.width+=e,this.height+=e},f=function(f,d,h,l){return{x:f,y:d,width:h,height:l,isRectangle:e,getX2:t,getY2:n,union:i,intersect:r,intersection:o,offset:a,clone:s,hasPosition:u,grow:c}};return f}),rice.define("rice/math/vector2",[],function(){"use strict";var e=function(){return!0},t=function(e){var t=this.clone();return t.addTo(e),t},n=function(e){return this.x+=e.x,this.y+=e.y,this},i=function(e){var t=this.clone();return t.substractFrom(e),t},r=function(e){return this.x-=e.x,this.y-=e.y,this},o=function(){return Math.atan2(this.y,this.x)},a=function(e){return Math.atan2(e.y-this.y,e.x-this.x)},s=function(e){return this.x*e.x+this.y*e.y},u=function(e){var t=this.clone();return t.multiplyWith(e),t},c=function(e){return this.x*=e.x,this.y*=e.y,this},f=function(e){var t=this.clone();return t.divideBy(e),t},d=function(e){return this.x/=e.x,this.y/=e.y,this},h=function(e){return this.x*=e,this.y*=e,this},l=function(){return Math.sqrt(this.dotProduct(this))},p=function(){var e=this.length();return this.x/=e,this.y/=e,this},g=function(e){return e.substract(this).length()},m=function(){return v(this.x,this.y)},v=function(v,x){return{x:v,y:x,isVector2:e,add:t,addTo:n,substract:i,substractFrom:r,angle:o,angleBetween:a,dotProduct:s,multiply:u,multiplyWith:c,divide:f,divideBy:d,scale:h,length:l,normalize:p,distance:g,clone:m}};return v});